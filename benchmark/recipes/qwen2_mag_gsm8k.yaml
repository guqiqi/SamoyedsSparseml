modifiers:
  - !EpochRangeModifier
    start_epoch: 0
    end_epoch: 10

training_modifiers:
  - !LearningRateFunctionModifier
    start_epoch: 0.0
    end_epoch: 3.0
    lr_func: linear
    init_lr: 8e-5
    final_lr: 3e-6
  - !LearningRateFunctionModifier
    start_epoch: 3.0
    end_epoch: 20.0
    lr_func: linear
    init_lr: 1e-5
    final_lr: 8e-6

  - !GMPruningModifier
    params: [
      're:.*layers.(3|4|5|6).mlp.(gate_proj|up_proj|down_proj)',
    ]
    init_sparsity: 0.0
    final_sparsity: 0.75
    start_epoch: 2.0
    end_epoch: 3.0
    update_frequency: 1.0
    inter_func: cubic
    global_sparsity: False
    mask_type: unstructured
    leave_enabled: True

  - !GMPruningModifier
    params: [
      're:.*layers.(7|8|9|10).mlp.(gate_proj|up_proj|down_proj)',
    ]
    init_sparsity: 0.0
    final_sparsity: 0.75
    start_epoch: 3.0
    end_epoch: 4.0
    update_frequency: 1.0
    inter_func: cubic
    global_sparsity: False
    mask_type: unstructured
    leave_enabled: True

  - !GMPruningModifier
    params: [
      're:.*layers.(11|12|13|14).mlp.(gate_proj|up_proj|down_proj)',
    ]
    init_sparsity: 0.0
    final_sparsity: 0.75
    start_epoch: 4.0
    end_epoch: 5.0
    update_frequency: 1.0
    inter_func: cubic
    global_sparsity: False
    mask_type: unstructured
    leave_enabled: True

  - !GMPruningModifier
    params: [
      're:.*layers.(15|16|17|18).mlp.(gate_proj|up_proj|down_proj)',
    ]
    init_sparsity: 0.0
    final_sparsity: 0.75
    start_epoch: 5.0
    end_epoch: 6.0
    update_frequency: 1.0
    inter_func: cubic
    global_sparsity: False
    mask_type: unstructured
    leave_enabled: True

  - !GMPruningModifier
    params: [
      're:.*layers.(19|20|21|22).mlp.(gate_proj|up_proj|down_proj)',
    ]
    init_sparsity: 0.0
    final_sparsity: 0.75
    start_epoch: 6.0
    end_epoch: 7.0
    update_frequency: 1.0
    inter_func: cubic
    global_sparsity: False
    mask_type: unstructured
    leave_enabled: True
